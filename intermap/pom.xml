<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>org.geonetwork-opensource</groupId>
    <artifactId>geonetwork</artifactId>
    <version>2.5.0-SNAPSHOT</version>
  </parent>


  <!-- =========================================================== -->
  <!--     Module Description                                      -->
  <!-- =========================================================== -->
  <groupId>intermap</groupId>
  <artifactId>intermap</artifactId>
  <packaging>war</packaging>
  <name>Intermap Web module</name>
  <description> Intermap web module. </description>

  <licenses>
    <license>
      <name>Lesser General Public License (LGPL)</name>
      <url>http://www.gnu.org/copyleft/lesser.txt</url>
      <distribution>repo</distribution>
    </license>
  </licenses>


  <dependencies>
    <dependency>
      <groupId>commons-httpclient</groupId>
      <artifactId>commons-httpclient</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.commons</groupId>
      <artifactId>commons-email</artifactId>
    </dependency>
    <dependency>
      <groupId>com.lowagie</groupId>
      <artifactId>itext</artifactId>
    </dependency>
    <dependency>
      <groupId>xalan</groupId>
      <artifactId>xalan</artifactId>
    </dependency>
    <dependency>
      <groupId>javax.media</groupId>
      <artifactId>jai_codec</artifactId>
    </dependency>
    <dependency>
      <groupId>tyrex</groupId>
      <artifactId>tyrex</artifactId>
      <version>1.0</version>
    </dependency> 

    <!-- =========================================================== -->
    <!-- FIXME :  Local repository for now -->
    <dependency>
      <groupId>org.geonetwork-opensource</groupId>
      <artifactId>jeeves</artifactId>
      <version>${pom.version}</version>
    </dependency>
    <dependency>
      <groupId>org.geonetwork-opensource</groupId>
      <artifactId>cachingxslt</artifactId>
      <version>${pom.version}</version>
    </dependency>
    <dependency>
      <groupId>acme</groupId>
      <artifactId>acme</artifactId>
      <version>1.0</version>
    </dependency>

  </dependencies>
  
  <build>
    <plugins>
        <plugin>
            <groupId>net.alchim31.maven</groupId>
            <artifactId>yuicompressor-maven-plugin</artifactId>
            <executions>
                <execution>
                    <!-- 
                        This phase does not belong to the default lifecycle for a jar/war packaging.
                        It has to be run explicitely as mvn command argument for generating obfuscated js. 
                    -->   
                    <phase>initialize</phase>
                    <goals>
                        <goal>compress</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <nosuffix>true</nosuffix>
                <jswarn>false</jswarn>
                <aggregations>
                    <aggregation>
                        <insertNewLine>true</insertNewLine>
                        <output>${basedir}/src/main/webapp/scripts/intermap.js</output>
                        <includes>
                            <include>im_extras.js</include>
                            <include>im_class.js</include>
                            <include>util.js</include>
                            <include>im_ajax.js</include>
                            <include>im_minimap.js</include>
                            <include>im_bigmap.js</include>
                            <include>im_markers.js</include>
                            <include>im_integration.js</include>
                            <include>im_layers.js</include>
                        </includes>
                    </aggregation>
                </aggregations>
            </configuration>
        </plugin>
        
       <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1-alpha-2</version>
        <configuration>
            <attachClasses>true</attachClasses>
            <warName>intermap</warName>
            <webappDirectory>${project.build.directory}/intermap</webappDirectory>
        </configuration>
       </plugin>
      
      <plugin>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>maven-jetty-plugin</artifactId>
        <version>6.1.14</version>
        <configuration>
          <contextPath>intermap</contextPath>
          <connectors>
            <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector">
              <port>8080</port>
              <maxIdleTime>10000</maxIdleTime>
            </connector>
          </connectors>
          <contextPath>intermap</contextPath>
          <webApp>${project.build.directory}/intermap</webApp>
        </configuration>
      </plugin>
      
      
    </plugins>
  </build>

</project>
