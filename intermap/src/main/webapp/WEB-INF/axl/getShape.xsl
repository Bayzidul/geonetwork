<?xml version="1.0" encoding="UTF-8"?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">	<xsl:template match="/">		<ARCXML>			<REQUEST>				<GET_EXTRACT>					<PROPERTIES>						<xsl:apply-templates select="/service/envelope/ENVELOPE"/>						<IMAGESIZE>							<xsl:attribute name="width"><xsl:value-of select="service/imageWidth"/></xsl:attribute>							<xsl:attribute name="height"><xsl:value-of select="service/imageHeight"/></xsl:attribute>						</IMAGESIZE>						<xsl:call-template name="layerList"/>						<FILTERCOORDSYS id="4326"/>						<FEATURECOORDSYS id="4326"/>						<xsl:apply-templates mode="output" select="/service/info/ARCXML/RESPONSE"/>					</PROPERTIES>				</GET_EXTRACT>			</REQUEST>		</ARCXML>	</xsl:template>		<!-- ENVELOPE Element -->	<xsl:template match="ENVELOPE">		<ENVELOPE reaspect="true">			<xsl:attribute name="minx"><xsl:value-of select="@minx"/></xsl:attribute>			<xsl:attribute name="maxx"><xsl:value-of select="@maxx"/></xsl:attribute>			<xsl:attribute name="miny"><xsl:value-of select="@miny"/></xsl:attribute>			<xsl:attribute name="maxy"><xsl:value-of select="@maxy"/></xsl:attribute>		</ENVELOPE>	</xsl:template>		<xsl:template name="layerList">		<LAYERLIST>			<xsl:for-each select="/service/visibleLayers/layer">				<LAYERDEF>					<xsl:variable name="id" select="@internalId"/>					<xsl:attribute name="id"><xsl:value-of select="/service/info/ARCXML/RESPONSE/SERVICEINFO/LAYERINFO[@internalId=$id]/@id"/></xsl:attribute>					<xsl:attribute name="visible"><xsl:value-of select="@visible"/></xsl:attribute>				</LAYERDEF>			</xsl:for-each>		</LAYERLIST>	</xsl:template></xsl:stylesheet>