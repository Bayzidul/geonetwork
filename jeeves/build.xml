<!--
==============================================================================
=== Build file to allow ant (http://jakarta.apache.org/ant/) to be used
=== to build the Jeeves project.
==============================================================================
-->

<project name="jeeves" default="all">
 <property file="../web/geonetwork/WEB-INF/server.prop"/>
 <property name="ant.build.javac.target" value="${ant.build.javac.target}"/>
 <property name="debugOn" value="${debugOn}"/>

 <!-- =============================================================== -->

 <target name="all">
  <delete file = "jeeves.jar" />
  <delete dir  = "build" />
  <mkdir dir  = "build" />

  <!-- run the ant timestamp task -->
  <tstamp><format property="gndate" pattern="yyyy-MM-dd'T'k:mm:ssZ"/></tstamp>

  <javac srcdir     = "src"
     destdir    = "build"
     extdirs    = "lib"
     includes   = "jeeves/**"
     debug      = "${debugOn}"/>

  <jar  jarfile  = "jeeves.jar"
     basedir  = "build"
     includes = "jeeves/**" >
    <manifest>
     <attribute name="GeoNetwork-Version" value="${version}"/>
     <attribute name="Class-compatibility-Version-Number" value="${ant.build.javac.target}"/>
     <attribute name="Built-Date" value="${gndate}"/>
    </manifest>
  </jar>
  <delete dir="build"/>
 </target>

 <!-- =============================================================== -->

</project>
